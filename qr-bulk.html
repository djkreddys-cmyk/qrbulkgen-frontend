<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Single QR Generator</title>
  <script src="js/protect.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>
<body class="bg-gray-100">
 <!-- NAVBAR -->
<header class="bg-white shadow sticky top-0 z-50">
  <div class="max-w-7xl mx-auto px-6 py-4 flex items-center justify-between">

    <!-- LOGO -->
    <a id="logoLink" href="index.html" class="text-xl font-bold text-indigo-600">
      QRBulkGen
    </a>

    <div class="flex items-center gap-6">

      <!-- Protected Links -->
      <div id="navLinks" class="hidden md:flex items-center gap-6">
        <a href="qr-single.html" class="hover:text-indigo-600">Generate QR</a>
        <a href="qr-bulk.html" class="hover:text-indigo-600">Bulk Upload</a>
        <a href="qr-dashboard.html" class="hover:text-indigo-600">Dashboard</a>
      </div>

      <!-- Login/Profile -->
      <div id="navUser" class="min-w-[140px] text-right"></div>

    </div>
  </div>
</header>
<div class="max-w-7xl mx-auto p-6 grid md:grid-cols-2 gap-8">

  <!-- LEFT INPUT PANEL -->
  <div class="bg-white rounded-2xl shadow p-6">
    <h2 class="text-2xl font-bold mb-6">Create QR Code</h2>

    <input id="qrInput" type="text" placeholder="Enter URL or text" class="w-full border rounded-xl p-3 mb-6" />

    <!-- Color Presets -->
    <label class="block mb-2 font-medium">Color Presets</label>
    <div class="flex gap-3 mb-6">
      <button onclick="setPreset('#000000')" class="w-8 h-8 rounded-full bg-black"></button>
      <button onclick="setPreset('#1d4ed8')" class="w-8 h-8 rounded-full bg-blue-700"></button>
      <button onclick="setPreset('#16a34a')" class="w-8 h-8 rounded-full bg-green-600"></button>
      <button onclick="setPreset('#dc2626')" class="w-8 h-8 rounded-full bg-red-600"></button>
    </div>

    <label class="block mb-2 font-medium">Custom Color</label>
    <input id="color" type="color" value="#000000" class="mb-6" />

    <!-- Logo Upload -->
    <label class="block mb-2 font-medium">Logo Inside QR</label>
    <input type="file" id="logo" accept="image/*" class="mb-6" />

    <button onclick="generateQR()" class="mt-4 w-full bg-indigo-600 text-white py-3 rounded-xl">Generate QR</button>
  </div>

  <!-- RIGHT PREVIEW PANEL -->
  <div class="bg-white rounded-2xl shadow p-6 flex flex-col items-center justify-center">
    <h2 class="text-xl font-semibold mb-6">Live Preview</h2>
    <div id="qrcode" class="p-6 bg-white"></div>
    <button onclick="downloadQR()" class="mt-6 bg-green-600 text-white px-6 py-3 rounded-xl">Download PNG</button>
  </div>

</div>

<script>
let qr;
function setPreset(color){document.getElementById('color').value=color;generateQR();}
function generateQR(){
  const text=document.getElementById('qrInput').value || 'https://example.com';
  const color=document.getElementById('color').value;
  const container=document.getElementById('qrcode');
  container.innerHTML='';
  qr=new QRCode(container,{text:text,width:260,height:260,colorDark:color,colorLight:'#ffffff'});
  setTimeout(drawLogo,300);
}
function drawLogo(){
  const logoInput=document.getElementById('logo');
  if(!logoInput.files[0])return;
  const imgEl=document.querySelector('#qrcode img, #qrcode canvas');
  if(!imgEl)return;
  const canvas=document.createElement('canvas');
  canvas.width=260;canvas.height=260;
  const ctx=canvas.getContext('2d');
  const base=new Image();
  base.src=imgEl.src||imgEl.toDataURL();
  base.onload=()=>{
    ctx.drawImage(base,0,0,260,260);
    const logo=new Image();
    logo.src=URL.createObjectURL(logoInput.files[0]);
    logo.onload=()=>{
      const size=60;
      ctx.fillStyle='#fff';
      ctx.fillRect(100,100,size,size);
      ctx.drawImage(logo,100,100,size,size);
      document.getElementById('qrcode').innerHTML='';
      document.getElementById('qrcode').appendChild(canvas);
    };
  };
}
function downloadQR(){
  const canvas=document.querySelector('#qrcode canvas');
  if(!canvas)return alert('Generate QR first');
  const link=document.createElement('a');
  link.href=canvas.toDataURL('image/png');
  link.download='qr-code.png';
  link.click();
}
</script>

</body>
</html>








