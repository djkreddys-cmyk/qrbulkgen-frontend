<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Generate QR â€” QRSingleGen</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
</head>

<body class="bg-gray-100 min-h-screen">
<!--NAV BAR-->
  <header class="bg-white shadow sticky top-0 z-50">
  <div class="max-w-7xl mx-auto px-6 py-4 flex items-center justify-between">

    <!-- LOGO -->
    <a id="logoLink" href="index.html" class="text-xl font-bold text-indigo-600">
      QRBulkGen
    </a>

    <div class="flex items-center gap-6">

      <!-- Protected Links -->
      <div id="navLinks" class="hidden md:flex items-center gap-6">
        <a href="qr-single.html" class="hover:text-indigo-600">Generate QR</a>
        <a href="qr-bulk.html" class="hover:text-indigo-600">Bulk Upload</a>
        <a href="qr-dashboard.html" class="hover:text-indigo-600">Dashboard</a>
      </div>

      <!-- Login/Profile -->
      <div id="navUser" class="min-w-[140px] text-right"></div>

    </div>
  </div>
</header>
<div class="max-w-6xl mx-auto p-6 grid md:grid-cols-2 gap-10">

  <!-- FORM AREA -->

  <div class="bg-white rounded-2xl shadow p-6">
    <h2 id="qrTitle" class="text-2xl font-bold mb-6">Generate QR</h2>

```
<div id="formArea" class="space-y-4"></div>

<button onclick="generateQR()" class="mt-6 w-full bg-indigo-600 text-white py-3 rounded-xl">
  Generate QR
</button>
```

  </div>

  <!-- PREVIEW -->

  <div class="bg-white rounded-2xl shadow p-6 text-center">
    <h3 class="font-bold text-lg mb-4">Live Preview</h3>
    <canvas id="qrCanvas" class="mx-auto"></canvas>

```
<button onclick="downloadQR()" class="mt-6 px-6 py-3 bg-green-600 text-white rounded-xl">
  Download PNG
</button>
```

  </div>

</div>

<script src="js/auth.js"></script>

<script>
const type = localStorage.getItem("qrType") || "text";
const formArea = document.getElementById("formArea");
const qrTitle = document.getElementById("qrTitle");

/* ---------------- FORM BUILDER ---------------- */

function input(id,label,placeholder){
 return `
 <div>
   <label class="text-sm text-gray-600">${label}</label>
   <input id="${id}" class="w-full border rounded-lg px-4 py-2 mt-1" placeholder="${placeholder}">
 </div>`;
}

function buildForm(){

switch(type){

case "text":
qrTitle.innerText="Text QR";
formArea.innerHTML=input("text","Enter Text","Hello world");
break;

case "website":
qrTitle.innerText="Website QR";
formArea.innerHTML=input("url","Website URL","https://example.com");
break;

case "wifi":
qrTitle.innerText="WiFi QR";
formArea.innerHTML=
input("ssid","WiFi Name","MyWiFi")+
input("pass","Password","12345678")+
input("sec","Security","WPA");
break;

case "whatsapp":
qrTitle.innerText="WhatsApp QR";
formArea.innerHTML=
input("phone","Phone with country code","919999999999")+
input("msg","Message","Hello!");
break;

case "upi":
qrTitle.innerText="UPI Payment QR";
formArea.innerHTML=
input("upi","UPI ID","name@upi")+
input("name","Receiver Name","Ravi")+
input("amt","Amount","100");
break;

case "email":
qrTitle.innerText="Email QR";
formArea.innerHTML=
input("mail","Email","test@mail.com")+
input("sub","Subject","Hello")+
input("body","Message","How are you?");
break;

case "phone":
qrTitle.innerText="Phone Call QR";
formArea.innerHTML=input("call","Phone number","9999999999");
break;

case "location":
qrTitle.innerText="Location QR";
formArea.innerHTML=
input("lat","Latitude","16.506")+
input("lon","Longitude","80.648");
break;

case "vcard":
qrTitle.innerText="Business Card QR";
formArea.innerHTML=
input("n","Name","John")+
input("p","Phone","9999999999")+
input("e","Email","john@mail.com")+
input("c","Company","ABC Pvt Ltd");
break;

}

}

buildForm();

/* ---------------- DATA BUILDER ---------------- */

function getQRData(){

switch(type){

case "text": return document.getElementById("text").value;

case "website": return document.getElementById("url").value;

case "wifi":
return `WIFI:T:${sec.value};S:${ssid.value};P:${pass.value};;`;

case "whatsapp":
return `https://wa.me/${phone.value}?text=${encodeURIComponent(msg.value)}`;

case "upi":
return `upi://pay?pa=${upi.value}&pn=${name.value}&am=${amt.value}`;

case "email":
return `mailto:${mail.value}?subject=${sub.value}&body=${body.value}`;

case "phone":
return `tel:${call.value}`;

case "location":
return `https://maps.google.com/?q=${lat.value},${lon.value}`;

case "vcard":
return `BEGIN:VCARD
VERSION:3.0
FN:${n.value}
ORG:${c.value}
TEL:${p.value}
EMAIL:${e.value}
END:VCARD`;
}

}

/* ---------------- QR GENERATOR ---------------- */

function generateQR(){
const data=getQRData();
if(!data) return alert("Fill details");

QRCode.toCanvas(document.getElementById("qrCanvas"), data, {width:280});
}

/* ---------------- DOWNLOAD ---------------- */

function downloadQR(){
const canvas=document.getElementById("qrCanvas");
const link=document.createElement("a");
link.download="qr.png";
link.href=canvas.toDataURL();
link.click();
}
</script>
<!-- ALWAYS LAST -->
<script src="/js/auth.js"></script>
</body>
</html>


