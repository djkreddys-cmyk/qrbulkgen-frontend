<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Generate QR â€” QRBulkGen</title>

<script src="https://cdn.tailwindcss.com"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

<script src="js/auth.js"></script>

<style>
.qrTab{padding:10px 14px;border-radius:10px;color:#374151;white-space:nowrap}
.qrTab:hover{background:#eef2ff;color:#4f46e5}
.qrTab.active{background:#4f46e5;color:white}
</style>

</head>

<body class="bg-gray-100">

<!-- NAVBAR -->

<header class="bg-white shadow sticky top-0 z-50">
<div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
<a id="logoLink" href="qr-dashboard.html" class="text-xl font-bold text-indigo-600">QRBulkGen</a>

<div class="flex items-center gap-6">
<div id="navLinks" class="hidden md:flex gap-6">
<a href="qr-single.html">Generate QR</a>
<a href="qr-bulk.html">Bulk Upload</a>
<a href="qr-dashboard.html">Dashboard</a>
</div>
<div id="navUser"></div>
</div>
</div>
</header>

<!-- TABS -->

<div class="bg-white border-b sticky top-[72px] z-40">
<div class="max-w-7xl mx-auto flex gap-4 py-3 px-4 overflow-x-auto" id="tabs">
<button class="qrTab active" onclick="selectType('text',this)">Text</button>
<button class="qrTab" onclick="selectType('url',this)">Website</button>
<button class="qrTab" onclick="selectType('whatsapp',this)">WhatsApp</button>
<button class="qrTab" onclick="selectType('wifi',this)">WiFi</button>
<button class="qrTab" onclick="selectType('upi',this)">UPI</button>
<button class="qrTab" onclick="selectType('email',this)">Email</button>
<button class="qrTab" onclick="selectType('phone',this)">Phone</button>
<button class="qrTab" onclick="selectType('location',this)">Location</button>
<button class="qrTab" onclick="selectType('vcard',this)">Business Card</button>
<button class="qrTab" onclick="selectType('menu',this)">Restaurant Menu</button>
<button class="qrTab" onclick="selectType('product',this)">Product Label</button>
<button class="qrTab" onclick="selectType('ticket',this)">Event Ticket</button>
</div>
</div>

<!-- CONTENT -->

<div class="max-w-7xl mx-auto p-6 grid md:grid-cols-2 gap-8">
<div id="formArea" class="bg-white rounded-2xl shadow p-6"></div>

<div class="bg-white rounded-2xl shadow p-6 flex flex-col items-center">
<h2 class="text-xl font-semibold mb-4">Live Preview</h2>
<div id="qrcode" class="p-6 bg-white"></div>
<button onclick="downloadQR()" class="mt-6 bg-green-600 text-white px-6 py-3 rounded-xl">Download PNG</button>
</div>
</div>

<script>
let currentType="text";
let qr;

/* ---------- TAB SWITCH ---------- */
function selectType(type,el){
currentType=type;
document.querySelectorAll(".qrTab").forEach(t=>t.classList.remove("active"));
el.classList.add("active");
renderForm();
}

/* ---------- INPUT BUILDER ---------- */
function input(id,placeholder){
return `<input id="${id}" placeholder="${placeholder}" class="w-full border rounded-xl p-3 mb-3" oninput="generateQR()">`;
}

/* ---------- FORM RENDER ---------- */
function renderForm(){
const a=document.getElementById("formArea");

const forms={
text:`<h2 class="text-xl font-bold mb-4">Text QR</h2>${input('data','Enter text')}`,

url:`<h2 class="text-xl font-bold mb-4">Website</h2>${input('data','https://example.com')}`,

whatsapp:`<h2 class="text-xl font-bold mb-4">WhatsApp</h2>
${input('phone','Phone')}
${input('msg','Message')}`,

wifi:`<h2 class="text-xl font-bold mb-4">WiFi</h2>
${input('ssid','Network Name')}
${input('pass','Password')}`,

upi:`<h2 class="text-xl font-bold mb-4">UPI</h2>
${input('upi','UPI ID')}
${input('amount','Amount')}`,

email:`<h2 class="text-xl font-bold mb-4">Email</h2>
${input('mail','Email')}
${input('subject','Subject')}`,

phone:`<h2 class="text-xl font-bold mb-4">Phone</h2>${input('call','Phone Number')}`,

location:`<h2 class="text-xl font-bold mb-4">Location</h2>
${input('address','Shop / Office / Landmark')}`,

menu:`<h2 class="text-xl font-bold mb-4">Restaurant Menu</h2>${input('menuUrl','Menu URL')}`,

product:`<h2 class="text-xl font-bold mb-4">Product Label</h2>
${input('productName','Product Name')}
${input('productCode','SKU Code')}`,

ticket:`<h2 class="text-xl font-bold mb-4">Event Ticket</h2>
${input('eventName','Event')}
${input('seat','Seat')}
${input('date','Date')}`,

vcard:`<h2 class="text-xl font-bold mb-4">Business Card</h2>
${input('name','Name')}
${input('org','Company')}
${input('tel','Phone')}`
};

a.innerHTML=forms[currentType];
generateQR();
}

/* ---------- SAFE GET VALUE ---------- */
function val(id){
return document.getElementById(id)?.value || "";
}

/* ---------- QR GENERATION ---------- */
function generateQR(){
let d="";

switch(currentType){
case"whatsapp": d=`https://wa.me/${val('phone')}?text=${encodeURIComponent(val('msg'))}`; break;
case"wifi": d=`WIFI:T:WPA;S:${val('ssid')};P:${val('pass')};;`; break;
case"upi": d=`upi://pay?pa=${val('upi')}&am=${val('amount')}`; break;
case"email": d=`mailto:${val('mail')}?subject=${val('subject')}`; break;
case"phone": d=`tel:${val('call')}`; break;
case"location": d=`https://www.openstreetmap.org/search?query=${encodeURIComponent(val('address'))}`; break;
case"menu": d=val('menuUrl'); break;
case"product": d=`Product:${val('productName')}\nCode:${val('productCode')}`; break;
case"ticket": d=`Event:${val('eventName')}\nSeat:${val('seat')}\nDate:${val('date')}`; break;
case"vcard": d=`BEGIN:VCARD\nVERSION:3.0\nFN:${val('name')}\nORG:${val('org')}\nTEL:${val('tel')}\nEND:VCARD`; break;
default: d=val('data');
}

const c=document.getElementById("qrcode");
c.innerHTML="";
if(d) qr=new QRCode(c,{text:d,width:260,height:260});
}

/* ---------- DOWNLOAD ---------- */
function downloadQR(){
const img=document.querySelector("#qrcode img");
if(!img)return alert("Generate QR first");
const a=document.createElement("a");
a.href=img.src;
a.download="qr-code.png";
a.click();
}

renderForm();
</script>

</body>
</html>
