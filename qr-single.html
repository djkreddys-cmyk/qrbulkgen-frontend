<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Generate QR — QRBulkGen</title>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

<style>
/* Hide scrollbar */
.tabWrap::-webkit-scrollbar{display:none}
.tabWrap{scrollbar-width:none}

/* Tabs */
.qrTab{
 padding:10px 18px;
 border-radius:999px;
 background:#f3f4f6;
 cursor:pointer;
 white-space:nowrap;
 font-weight:500;
}
.qrTab.active{
 background:#4f46e5;
 color:white;
}
.arrowBtn{
 width:32px;height:32px;border-radius:999px;
 background:#e5e7eb;display:flex;align-items:center;justify-content:center;
 cursor:pointer;
}
</style>
</head>

<body class="bg-gray-100">

<!-- NAVBAR -->
<header class="bg-white shadow sticky top-0 z-50">
<div class="max-w-7xl mx-auto px-6 py-4 flex justify-between">
<a href="qr-dashboard.html" class="text-xl font-bold text-indigo-600">QRBulkGen</a>
<div id="navUser"></div>
</div>
</header>

<div class="max-w-7xl mx-auto mt-6 grid md:grid-cols-2 gap-8 px-6">

<!-- LEFT -->
<div class="bg-white rounded-2xl shadow p-6">

<!-- Slider Tabs -->
<div class="flex items-center gap-2 mb-6">

<div class="arrowBtn" onclick="scrollTabs(-200)">◀</div>

<div id="tabs" class="tabWrap flex gap-3 overflow-x-auto flex-1">

<button class="qrTab active" onclick="selectType('text',this)">Text</button>
<button class="qrTab" onclick="selectType('url',this)">Website</button>
<button class="qrTab" onclick="selectType('phone',this)">Phone</button>
<button class="qrTab" onclick="selectType('wifi',this)">WiFi</button>
<button class="qrTab" onclick="selectType('whatsapp',this)">WhatsApp</button>
<button class="qrTab" onclick="selectType('location',this)">Location</button>
<button class="qrTab" onclick="selectType('vcard',this)">Business Card</button>
<button class="qrTab" onclick="selectType('product',this)">Product</button>
<button class="qrTab" onclick="selectType('ticket',this)">Event Ticket</button>
<button class="qrTab" onclick="selectType('menu',this)">Menu</button>

</div>

<div class="arrowBtn" onclick="scrollTabs(200)">▶</div>

</div>

<div id="formArea"></div>

</div>

<!-- RIGHT -->
<div class="bg-white rounded-2xl shadow p-6 flex flex-col items-center">
<h2 class="text-xl font-bold mb-6">Live Preview</h2>
<div id="qrcode" class="p-4 bg-white"></div>
<button onclick="downloadQR()" class="mt-6 bg-green-600 text-white px-6 py-3 rounded-xl">
Download PNG
</button>
</div>

</div>

<script>
let currentType="text";

/* TAB SCROLL */
function scrollTabs(px){
document.getElementById("tabs").scrollBy({left:px,behavior:"smooth"});
}

/* TYPE SELECT */
function selectType(type,el){
currentType=type;
document.querySelectorAll(".qrTab").forEach(t=>t.classList.remove("active"));
el.classList.add("active");
renderForm();
}

/* FORMS */
function renderForm(){

const forms={
text:`<input id="data" placeholder="Enter text" class="w-full border rounded-xl p-3">`,
url:`<input id="data" placeholder="https://example.com" class="w-full border rounded-xl p-3">`,
phone:`<input id="phone" placeholder="+91xxxxxxxxxx" class="w-full border rounded-xl p-3">`,
wifi:`<input id="ssid" placeholder="WiFi Name" class="w-full border rounded-xl p-3 mb-2">
      <input id="pass" placeholder="Password" class="w-full border rounded-xl p-3">`,
whatsapp:`<input id="wa" placeholder="919999999999" class="w-full border rounded-xl p-3 mb-2">
          <input id="msg" placeholder="Message" class="w-full border rounded-xl p-3">`,

location:`<input id="address" placeholder="Enter address (e.g Vijayawada)" class="w-full border rounded-xl p-3">
<button onclick="generateLocationQR()" class="mt-3 bg-indigo-600 text-white px-4 py-2 rounded-lg">Generate Location QR</button>`,

vcard:`<input id="name" placeholder="Name" class="w-full border rounded-xl p-3 mb-2">
<input id="org" placeholder="Company" class="w-full border rounded-xl p-3 mb-2">
<input id="phone" placeholder="Phone" class="w-full border rounded-xl p-3 mb-2">
<input id="email" placeholder="Email" class="w-full border rounded-xl p-3">`,

product:`<input id="pname" placeholder="Product Name" class="w-full border rounded-xl p-3 mb-2">
<input id="price" placeholder="Price" class="w-full border rounded-xl p-3">`,

ticket:`<input id="event" placeholder="Event" class="w-full border rounded-xl p-3 mb-2">
<input id="date" placeholder="Date" class="w-full border rounded-xl p-3 mb-2">
<input id="seat" placeholder="Seat" class="w-full border rounded-xl p-3">`,

menu:`<input id="url" placeholder="Menu URL" class="w-full border rounded-xl p-3">`
};

document.getElementById("formArea").innerHTML=forms[currentType];
}

renderForm();

/* LIVE INPUT QR */
document.addEventListener("input",()=>{
try{
let d="";
if(currentType==="text"||currentType==="url") d=data.value;
if(currentType==="phone") d=`tel:${phone.value}`;
if(currentType==="wifi") d=`WIFI:T:WPA;S:${ssid.value};P:${pass.value};;`;
if(currentType==="whatsapp") d=`https://wa.me/${wa.value}?text=${msg.value}`;
if(currentType==="vcard") d=`BEGIN:VCARD\nFN:${name.value}\nORG:${org.value}\nTEL:${phone.value}\nEMAIL:${email.value}\nEND:VCARD`;
if(currentType==="product") d=`${pname.value} - ₹${price.value}`;
if(currentType==="ticket") d=`${event.value} | ${date.value} | ${seat.value}`;
if(currentType==="menu") d=url.value;
if(d) createQR(d);
}catch{}
});

/* LOCATION GEOCODE */
async function generateLocationQR(){
const address=document.getElementById("address").value;
if(!address)return alert("Enter address");

const res=await fetch(`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(address)}&key=YOUR_GOOGLE_API_KEY`);
const data=await res.json();

if(!data.results.length)return alert("Address not found");

const loc=data.results[0].geometry.location;
createQR(`https://maps.google.com/?q=${loc.lat},${loc.lng}`);
}

/* QR */
function createQR(text){
document.getElementById("qrcode").innerHTML="";
new QRCode(document.getElementById("qrcode"),{text,width:260,height:260});
}

/* DOWNLOAD */
function downloadQR(){
const canvas=document.querySelector("#qrcode canvas");
if(!canvas)return alert("Generate QR first");
const link=document.createElement("a");
link.href=canvas.toDataURL();
link.download="qr.png";
link.click();
}
</script>

<script src="js/auth.js"></script>
</body>
</html>
